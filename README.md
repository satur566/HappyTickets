# HappyTickets
Al.Tush_Quest

Как это работает?

Допустим, что имеется полный набор классических транспортных билетов, но их длина равна n.

В таком случае для четного n будут действовать следущие правила:

1) (очевидное) Сравниваемые части будут иметь длину k = n / 2.
2) Сумма цифр (i) любой из сравниваемых частей не будет превышать k*9.
3) Количество счастливых билетов (E) для каждого i всегда равно квадрату какого-либо натурального числа. Пример:
    для шестизначного билета: i = 1, Е(1) = 9, i = 2, E(2) = 36 и т.д.
4) Ряд корней каждого E(i) для определенного k (F(k,i)) будет вычисляться по формуле:

    F(k, i) = F(k, i - 1) + F(k - 1, i) - F(k - 1, i - 10) ,

    при этом:
    - если i < 0, то F(k,i) = 0;
    - если i = 0, то F(k,i) = 1;
    - если i > 0 и k = {0,1}, то F(k,i) = 1.

5) Таким образом формула вычисления количества счастливых билетов любой четной длины равна:

    для 0 <= i <= k*9

    happyTickets = ∑(F(k,i)^2)

Для нечетного n расчет происходит иначе:

1) Сравниваемые части будут иметь длину k = n / 2 - 1, т.е. сравниваются только первые и последние части длиной k. Середина исключается.
    Таким образом получаем билет четной длины.
2) После расчета количества счастливых билетов для полученного билета четной длины, результат нужно умножить на 10.

Таким образом можно рекурсивно, аналогично задаче о поиске факториала, вычислить такой корень (метод ниже).
А если еще и заполнять своеобразную таблицу значений, то поиск ускоряется на несколько порядков.

P.S. Это все придумал сам, без гугла и прочего за пару бессонных вечеров.